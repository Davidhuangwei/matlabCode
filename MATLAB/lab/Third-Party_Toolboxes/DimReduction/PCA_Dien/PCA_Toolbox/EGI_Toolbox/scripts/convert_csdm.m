function convert_csdm(csdmfname)% converts old csdm files into new csdm files.% can either pass it the old csdmfname or get a GUI% new csdm file has .new appended to old csdm filename.if nargin < 1[fid, csdmfname] = get_fid('rb');elsefid = fopen(csdmfname,'rb');end;csdmfnamenew = [csdmfname '.new'];csdmfid = fopen(csdmfnamenew,'wb');[Epoch,Window_Length,NEpoch,Nbad_chan,bad_chan,ref_flag,reference,Nchan,Nfreq,ravgcsdm,iavgcsdm] = rd_csdm_old(fid);version = -1;fwrite(csdmfid,version,'integer*2');fwrite(csdmfid,Epoch,'real*4');fwrite(csdmfid,Window_Length,'integer*2')fwrite(csdmfid,NEpoch,'integer*2');	fwrite(csdmfid,Nbad_chan,'integer*2');fwrite(csdmfid,bad_chan,'integer*2');fwrite(csdmfid,ref_flag,'integer*2');if ref_flag == 6	fwrite(csdmfid, size(reference,2),'integer*2');	fwrite(csdmfid, reference,'integer*2');end;if ref_flag == 7	sigma_v = str2num(reference(9:10));	fwrite(csdmfid,sigma_v,'integer*2');end;fwrite(csdmfid,Nfreq,'integer*2');fwrite(csdmfid,size(ravgcsdm,2),'integer*2');fwrite(csdmfid,ravgcsdm','real*4');fwrite(csdmfid,iavgcsdm','real*4');fclose(csdmfid);fclose(fid);status = 1;fclose('all');	