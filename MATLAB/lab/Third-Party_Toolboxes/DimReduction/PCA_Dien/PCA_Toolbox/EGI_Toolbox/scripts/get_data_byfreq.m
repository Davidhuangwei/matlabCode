function [data, chans] = get_data_byfreq(freq,infname)infid = [];if nargin < 1	error('What''s the frequency')	endif nargin < 2	[infid, infname] = get_fid('rb');else	infid = fopen(infname,'rb');endif isempty(infname)	[infid, infname] = get_fid('rb');endversion = fread(infid,1,'int16');[nfiles,obs_labels,Epoch,Window_Length,NEpoch,Nbad_chan,bad_chan,ref_flag,reference,NChan,NFreq] = rd_anal_hdr(infid);data = zeros(nfiles,NChan(1));for i = 1:nfiles	obs_trial = fread(infid,[NChan(i),NFreq(i)],'float');	obs_trial = obs_trial';	data(i,:) = obs_trial(freq*Epoch(i)+1,:);	end;if version == -3	chans = [1:129];else	chans = zeros(2,8385);	icount = 1;	for i = 1:129		for j = i:129			chans(:,icount) = [i j]';			icount = icount + 1;		end	endend	fclose('all');	